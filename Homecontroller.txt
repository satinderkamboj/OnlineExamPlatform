using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using BusinessLayer;


namespace MVCDemo.Controllers
{
    public class HomeController : Controller
    {
        public ActionResult Index()
        {
            Response.Write(Session["ExamName"]);
            return View();
        }



        [HttpGet]
        [ActionName("Create")]
        public ActionResult Create_Get()
        {
            Response.Write("Wrong one");
            return View();
        }

        [HttpPost]
        [ActionName("Create")]
        public ActionResult Create_Post()
        {
            string s;
            if(ModelState.IsValid)
            {
                Name name = new Name();
                UpdateModel(name);
                Session["ExamName"] = name.ExamName;
            }
            return RedirectToAction("StartExam");
        }

        public ActionResult StartExam()
        {

            string s = (string)Session["ExamName"];
            AdminBusinessLayer adminBusinessLayer = new AdminBusinessLayer();
            List<QuestionPaper> question_papers = adminBusinessLayer.GetQuestionPapers.ToList();
            List<int> ques_id = new List<int>();
            Question quest;
            foreach (var item in question_papers)
            {
                if(item.qp_name==s)
                {
                    quest= adminBusinessLayer.getQuestionById(item.q1);
                    View(quest);
                    quest = adminBusinessLayer.getQuestionById(item.q2);
                    quest = adminBusinessLayer.getQuestionById(item.q3);
                    quest = adminBusinessLayer.getQuestionById(item.q4);
                    quest = adminBusinessLayer.getQuestionById(item.q5);
                    quest = adminBusinessLayer.getQuestionById(item.q6);
                    quest = adminBusinessLayer.getQuestionById(item.q7);
                    quest = adminBusinessLayer.getQuestionById(item.q8);
                    quest = adminBusinessLayer.getQuestionById(item.q9);
                    quest = adminBusinessLayer.getQuestionById(item.q10);
                }
            }
            return View();
        }
    }
}